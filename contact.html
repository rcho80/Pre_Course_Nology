<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Us</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="contact.css">
</head>

<body>
  <nav>
    <ul>
      <li><a href="home.html">Home</a></li>
      <li><a href="contact.html">Contact Us</a></li>
    </ul>
  </nav>

  <header>
    <h1>Contact All Sports</h1>
    <h3>Highest quality at reasonable prices</h3>
  </header>

  <main>
    <form class='contact-form' onsubmit="return submitMessage(event)">
      <!--full name-->
      <label for="full_name">Full Name:</label>
      <input id="name-label" type="text" name="full_name" placeholder="Enter your Full Name" required>
      <!--email-->
      <label for="email">Email:</label>
      <input id="email-label" type="text" name="email" placeholder="Enter your Email" required>
      <!--reason for comment-->
      <label for="feedback_type">Feedback Type:</label>
      <select name="feedback_type" id="feedbackType">
        <option value="review">Review</option>
        <option value="complaint">Complaint</option>
        <option value="event">Wholesale</option>
      </select>
      <!--comment-->
      <p><label for="comments"> Add comments:</p></label>
      <textarea placeholder="Leave your comments here..." name="comments" id="comments" cols="30" rows="3"
        required></textarea>
      <!--clear button-->
      <button type="clear">Clear</button>
      <!--submit button-->
      <input type="submit" value="Submit Query">
    </form>
  </main>

  <footer>
    <div class="form-title-section">
      <h3>Contact Messages</h3>
      <br>
      <button onclick="deleteMessages();">Clear Messages</button>
    </div>
    <div class="form-wrapper">
      <dl id="currentMessages">
      </dl>
    </div>
  </footer>

  <script>
    function deleteMessages() {
      if (window.sessionStorage.getItem('messages')) {
        window.sessionStorage.removeItem('messages');
      }

      renderMessages();
    }


    function submitMessage(event) {
      event.preventDefault();

      const name = document.getElementById('name-label').value;
      const email = document.getElementById('email-label').value;
      const feedback = document.getElementById("feedbackType").value;
      const comment = document.getElementById('comments').value;


      const messageObject = {
        name,
        email,
        feedback,
        comment
      }

      let currentMessages = [];

      if (window.sessionStorage.getItem('messages')) {
        currentMessages = JSON.parse(window.sessionStorage.getItem('messages'));
      }

      currentMessages.push(messageObject);
      window.sessionStorage.setItem('messages', JSON.stringify(currentMessages))

      renderMessages();
    }


    function renderMessages() {
      let currentMessages = [];

      if (window.sessionStorage.getItem('messages')) {
        currentMessages = JSON.parse(window.sessionStorage.getItem('messages'));
      }

      let listItems = [];
      for (let i = 0; i < currentMessages.length; i++) {
        let listItem = '';
        const currentMessage = currentMessages[i];
        listItem += `<dt>${currentMessage.name} - ${currentMessage.email}</dt>`
        listItem += `<dd>${currentMessage.feedback}: ${currentMessage.comment}</dd>`
        listItem += `<br />`;
        listItems.push(listItem);
      }

      let descList = document.getElementById('currentMessages');
      descList.innerHTML = listItems.join('');
    }

    renderMessages();
  </script>

</body>

</html>